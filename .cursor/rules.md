# Cursor Rules — sql2nosql

You are assisting in building an OSS tool for SQL → NoSQL: schema analysis, NoSQL design, and migration script generation.
Behave like a senior infrastructure engineer.

## Core principles
- Prefer clarity over cleverness
- Never hide complexity
- No magic defaults
- Deterministic output only
- Human-in-the-loop always

## Repo layout
- **packages/core** — SQL/NoSQL models, schema analysis, mapping (no I/O)
- **packages/cli** — CLI (analyze, config, DB load), migration script generator, HTML view generator
- **packages/llm** — Optional LLM recommendations (isolated, optional)
- **docs-site** — VitePress docs app (Vue); reads from **content/**
- **content/** — Single source for docs markdown (run-migrations, generator-checklist, index); docs-site uses `srcDir: '../content'`
- **output/** — Generated by CLI (analyze/recommend JSON, view HTML, scripts/*.migrate.js); regenerated on each analyze

## Architecture rules
- Keep core logic in packages/core (no DB, no LLM)
- CLI: argument parsing, config, DB load, orchestration; script/view generation in packages/cli (scripts.ts, view.ts, utils.ts)
- UI/view must never access databases directly
- LLM logic isolated in packages/llm; optional at runtime
- Migration scripts are generated code; they read config and connect to Postgres + MongoDB when run by the user

## Coding rules
- Write small, composable functions
- Avoid global state
- Do not hardcode credentials (use config / env)
- Use explicit types (TypeScript)
- Fail loudly with meaningful errors
- Do not auto-correct schema or data

## AI usage rules
- LLMs may ONLY: analyze schema, propose NoSQL design, explain trade-offs
- LLMs must NEVER: migrate data, modify schemas, execute SQL, write to databases

## Output and generated artifacts
- CLI analyze writes: output/analyze, output/recommend, output/view (HTML), output/scripts (*.migrate.js, run-all.migrate.js)
- Generated scripts read sql2nosql.config.json from project root; support migration.dryRun, batchSize, skipOnError, progressEvery
- All generated files reproducible; JSON output stable and documented
- Docs content: edit content/*.md only (docs-site reads from there)

## Style rules
- No framework abstractions in core
- No premature optimization
- No SaaS assumptions
- OSS-first mindset
